# é¡¹ç›®è¿ç§»æ€»ç»“

## âœ… è¿ç§»å®ŒæˆçŠ¶æ€

é¡¹ç›®å·²æˆåŠŸä»å•ç”¨æˆ· AdminUser ç³»ç»Ÿè¿ç§»åˆ°å¤šç”¨æˆ· User ç³»ç»Ÿï¼Œå¹¶å®ç°äº†å®Œæ•´çš„é¡µé¢é…ç½®ç®¡ç†åŠŸèƒ½ã€‚

## ğŸ“ å½“å‰ç›®å½•ç»“æ„

```
vtuber-site/
â”œâ”€â”€ app/                          # è·¯ç”±å±‚ï¼ˆé¡µé¢ç»„åˆï¼‰
â”‚   â”œâ”€â”€ page.tsx                  # é¦–é¡µï¼ˆä½¿ç”¨é»˜è®¤é…ç½®ï¼‰
â”‚   â”œâ”€â”€ admin/                    # ç”¨æˆ·ç®¡ç†é¡µé¢
â”‚   â”‚   â”œâ”€â”€ page.tsx              # ç™»å½•é¡µ
â”‚   â”‚   â”œâ”€â”€ register/page.tsx     # æ³¨å†Œé¡µ
â”‚   â”‚   â”œâ”€â”€ forgot-password/      # å¿˜è®°å¯†ç é¡µ
â”‚   â”‚   â”œâ”€â”€ reset-password/       # é‡ç½®å¯†ç é¡µ
â”‚   â”‚   â””â”€â”€ cms/page.tsx          # CMS ç¼–è¾‘å™¨
â”‚   â”œâ”€â”€ u/[slug]/                 # ç”¨æˆ·å…¬å¼€é¡µé¢ï¼ˆåŠ¨æ€è·¯ç”±ï¼‰
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â””â”€â”€ api/                      # APIè·¯ç”±
â”‚       â”œâ”€â”€ user/                 # ç”¨æˆ·ç›¸å…³ API
â”‚       â”‚   â”œâ”€â”€ register/
â”‚       â”‚   â”œâ”€â”€ login/
â”‚       â”‚   â”œâ”€â”€ me/
â”‚       â”‚   â”œâ”€â”€ forgot-password/
â”‚       â”‚   â””â”€â”€ reset-password/
â”‚       â””â”€â”€ page/                 # é¡µé¢é…ç½® API
â”‚           â”œâ”€â”€ [slug]/           # å…¬å¼€é¡µé¢é…ç½®
â”‚           â””â”€â”€ me/               # å½“å‰ç”¨æˆ·çš„é…ç½®
â”‚               â”œâ”€â”€ route.ts      # GET/PUT è‰ç¨¿é…ç½®
â”‚               â”œâ”€â”€ publish/      # å‘å¸ƒé…ç½®
â”‚               â””â”€â”€ upload/       # å›¾ç‰‡ä¸Šä¼ 
â”‚
â”œâ”€â”€ features/                      # åŠŸèƒ½åŸŸï¼ˆFeature-Sliced Designï¼‰
â”‚   â”œâ”€â”€ home-hero/                # é¦–é¡µ Hero åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ HomeHero.tsx
â”‚   â”‚   â”œâ”€â”€ types.ts
â”‚   â”‚   â”œâ”€â”€ constants.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ admin-auth/                # ç”¨æˆ·è®¤è¯åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â””â”€â”€ AdminAuthPanel.tsx
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ page-renderer/             # é¡µé¢æ¸²æŸ“å™¨
â”‚       â”œâ”€â”€ components/
â”‚       â”‚   â”œâ”€â”€ PageRenderer.tsx
â”‚       â”‚   â””â”€â”€ renderers/
â”‚       â”œâ”€â”€ registry.tsx
â”‚       â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ domain/                        # ä¸šåŠ¡é¢†åŸŸå±‚
â”‚   â”œâ”€â”€ page-config/               # é¡µé¢é…ç½®é¢†åŸŸ
â”‚   â”‚   â”œâ”€â”€ types.ts               # PageConfig ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ constants.ts           # DEFAULT_PAGE_CONFIG
â”‚   â”‚   â”œâ”€â”€ services.ts             # ä¸šåŠ¡é€»è¾‘å‡½æ•°
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ hero/                      # Hero é¢†åŸŸ
â”‚       â”œâ”€â”€ types.ts
â”‚       â”œâ”€â”€ constants.ts
â”‚       â””â”€â”€ services.ts
â”‚
â”œâ”€â”€ lib/                           # å·¥å…·å±‚
â”‚   â”œâ”€â”€ validation/                # Zod æ ¡éªŒ schemas
â”‚   â”‚   â””â”€â”€ pageConfigSchema.ts
â”‚   â”œâ”€â”€ session/                   # Session ç®¡ç†
â”‚   â”‚   â””â”€â”€ userSession.ts         # ç”¨æˆ· Session
â”‚   â”œâ”€â”€ userPasswordReset.ts       # å¯†ç é‡ç½®å·¥å…·
â”‚   â”œâ”€â”€ prisma.ts                  # Prisma Client
â”‚   â””â”€â”€ email.ts                   # é‚®ä»¶å‘é€
â”‚
â””â”€â”€ prisma/                        # æ•°æ®åº“
    â”œâ”€â”€ schema.prisma              # æ•°æ®åº“æ¨¡å‹
    â”œâ”€â”€ migrations/                # è¿ç§»æ–‡ä»¶
    â””â”€â”€ seed.ts                    # ç§å­æ•°æ®
```

## ğŸ”„ ä¸»è¦å˜æ›´

### 1. æ•°æ®åº“æ¨¡å‹å˜æ›´

**æ–°å¢æ¨¡å‹**ï¼š
- `User` - ç”¨æˆ·è´¦å·ï¼ˆæ›¿ä»£ AdminUserï¼‰
- `Page` - é¡µé¢é…ç½®ï¼ˆdraftConfigã€publishedConfigï¼‰
- `UserPasswordResetToken` - ç”¨æˆ·å¯†ç é‡ç½® token

**ä¿ç•™æ¨¡å‹**ï¼ˆå‘åå…¼å®¹ï¼‰ï¼š
- `AdminUser` - ä¿ç•™ä½†ä¸ä½¿ç”¨
- `SiteConfig` - ä¿ç•™ä½†ä¸ä½¿ç”¨
- `PasswordResetToken` - ä¿ç•™ä½†ä¸ä½¿ç”¨ï¼ˆAdminUser ç›¸å…³ï¼‰

### 2. è®¤è¯ç³»ç»Ÿå˜æ›´

**ä» AdminUser è¿ç§»åˆ° User**ï¼š
- ç™»å½• APIï¼š`/api/admin/login` â†’ `/api/user/login`
- æ³¨å†Œ APIï¼š`/api/admin/register` â†’ `/api/user/register`
- Session ç®¡ç†ï¼š`lib/session.ts` â†’ `lib/session/userSession.ts`

### 3. é¡µé¢é…ç½®ç³»ç»Ÿ

**æ–°å¢åŠŸèƒ½**ï¼š
- PageConfig ç±»å‹ç³»ç»Ÿï¼ˆæ”¯æŒ Heroã€Linksã€Gallery sectionsï¼‰
- è‰ç¨¿å’Œå‘å¸ƒç‰ˆæœ¬åˆ†ç¦»
- Zod æ ¡éªŒç¡®ä¿æ•°æ®å®Œæ•´æ€§
- é…ç½®é©±åŠ¨æ¸²æŸ“ç³»ç»Ÿ

### 4. ç”¨æˆ·å…¬å¼€é¡µé¢

**æ–°å¢è·¯ç”±**ï¼š
- `/u/[slug]` - åŠ¨æ€è·¯ç”±å±•ç¤ºç”¨æˆ·å‘å¸ƒçš„é¡µé¢
- æ”¯æŒé…ç½®é©±åŠ¨çš„èƒŒæ™¯ã€sections æ¸²æŸ“

### 5. CMS ç¼–è¾‘å™¨

**åŠŸèƒ½**ï¼š
- å¯è§†åŒ–ç¼–è¾‘é¡µé¢é…ç½®
- Hero Section å›¾ç‰‡ç¼–è¾‘ï¼ˆä¸Šä¼ æœ¬åœ°å›¾ç‰‡æˆ–è¾“å…¥ URLï¼‰
- è‰ç¨¿ä¿å­˜å’Œå‘å¸ƒåŠŸèƒ½
- å®æ—¶é¢„è§ˆ

### 6. å›¾ç‰‡ä¸Šä¼ 

**åŠŸèƒ½**ï¼š
- æ”¯æŒæœ¬åœ°å›¾ç‰‡ä¸Šä¼ åˆ°ç”¨æˆ·ä¸“å±ç›®å½•
- æ”¯æŒå¤–éƒ¨å›¾ç‰‡ URL
- Next.js Image ç»„ä»¶è‡ªåŠ¨åˆ¤æ–­æœ¬åœ°/å¤–éƒ¨å›¾ç‰‡

## ğŸ“ å·²åˆ é™¤çš„åŠŸèƒ½

### æ—§çš„ AdminUser ç›¸å…³ä»£ç 

- âŒ `/api/admin/*` - æ‰€æœ‰æ—§çš„ admin API è·¯ç”±
- âŒ `components/login/` - æ—§çš„ç™»å½•ç»„ä»¶
- âŒ `components/home/` - æ—§çš„é¦–é¡µç»„ä»¶ï¼ˆå·²è¿ç§»åˆ° featuresï¼‰
- âŒ `features/admin-auth/components/ForgotPasswordPanel.tsx` - æ—§çš„å¿˜è®°å¯†ç ç»„ä»¶
- âŒ `features/admin-auth/components/ResetPasswordPanel.tsx` - æ—§çš„é‡ç½®å¯†ç ç»„ä»¶
- âŒ `features/admin-auth/components/RegisterPanel.tsx` - æ—§çš„æ³¨å†Œç»„ä»¶

### ä¿ç•™ä½†ä¸å†ä½¿ç”¨çš„æ¨¡å‹

- `AdminUser` - ä¿ç•™åœ¨ schema ä¸­ï¼Œä½†ä¸ä½¿ç”¨
- `SiteConfig` - ä¿ç•™åœ¨ schema ä¸­ï¼Œä½†ä¸ä½¿ç”¨
- `PasswordResetToken` - ä¿ç•™åœ¨ schema ä¸­ï¼Œä½†ä¸ä½¿ç”¨

## âœ… è¿ç§»å®Œæˆçš„åŠŸèƒ½

- [x] ç”¨æˆ·æ³¨å†Œå’Œç™»å½•
- [x] å¯†ç é‡ç½®æµç¨‹
- [x] é¡µé¢é…ç½®ç³»ç»Ÿï¼ˆPageConfigï¼‰
- [x] è‰ç¨¿å’Œå‘å¸ƒç‰ˆæœ¬ç®¡ç†
- [x] ç”¨æˆ·å…¬å¼€é¡µé¢ï¼ˆ/u/[slug]ï¼‰
- [x] CMS ç¼–è¾‘å™¨
- [x] å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½
- [x] é…ç½®é©±åŠ¨æ¸²æŸ“
- [x] Zod æ•°æ®æ ¡éªŒ

## ğŸ§ª æµ‹è¯•æ£€æŸ¥æ¸…å•

### åŠŸèƒ½æµ‹è¯•

- [x] ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½æ­£å¸¸
- [x] ç”¨æˆ·ç™»å½•åŠŸèƒ½æ­£å¸¸
- [x] å¯†ç é‡ç½®åŠŸèƒ½æ­£å¸¸
- [x] CMS ç¼–è¾‘å™¨åŠŸèƒ½æ­£å¸¸
- [x] å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½æ­£å¸¸
- [x] è‰ç¨¿ä¿å­˜åŠŸèƒ½æ­£å¸¸
- [x] å‘å¸ƒåŠŸèƒ½æ­£å¸¸
- [x] ç”¨æˆ·å…¬å¼€é¡µé¢å¯ä»¥è®¿é—®
- [x] é¡µé¢é…ç½®æ¸²æŸ“æ­£ç¡®

### æ•°æ®éªŒè¯

- [x] æ•°æ®åº“è¿ç§»æˆåŠŸ
- [x] æµ‹è¯•ç”¨æˆ·åˆ›å»ºæˆåŠŸ
- [x] é¡µé¢é…ç½®ä¿å­˜å’Œè¯»å–æ­£å¸¸
- [x] Zod æ ¡éªŒæ­£å¸¸å·¥ä½œ

## ğŸ“š åç»­å»ºè®®

1. **æ–‡ä»¶å­˜å‚¨**ï¼šç”Ÿäº§ç¯å¢ƒéœ€è¦ä½¿ç”¨å¯¹è±¡å­˜å‚¨ï¼ˆS3ã€Blob Storage ç­‰ï¼‰ï¼Œå› ä¸º Serverless ç¯å¢ƒæ–‡ä»¶ç³»ç»Ÿæ˜¯åªè¯»çš„

2. **æ€§èƒ½ä¼˜åŒ–**ï¼š
   - è€ƒè™‘ä½¿ç”¨ ISR ç¼“å­˜ç”¨æˆ·é¡µé¢
   - å›¾ç‰‡ä½¿ç”¨ CDN åŠ é€Ÿ
   - æ•°æ®åº“è¿æ¥æ± ä¼˜åŒ–

3. **åŠŸèƒ½æ‰©å±•**ï¼š
   - æ”¯æŒæ›´å¤š section ç±»å‹
   - æ”¯æŒé¡µé¢ä¸»é¢˜å®šåˆ¶
   - æ”¯æŒ SEO ä¼˜åŒ–é…ç½®

4. **å®‰å…¨å¢å¼º**ï¼š
   - æ·»åŠ é€Ÿç‡é™åˆ¶
   - æ·»åŠ  CSRF ä¿æŠ¤
   - æ·»åŠ è¾“å…¥éªŒè¯å’Œæ¸…ç†

## âœ… è¿ç§»å®Œæˆ

æ‰€æœ‰åŠŸèƒ½å·²æˆåŠŸè¿ç§»å¹¶æµ‹è¯•é€šè¿‡ã€‚é¡¹ç›®ç°åœ¨æ”¯æŒå¤šç”¨æˆ·ç³»ç»Ÿï¼Œæ¯ä¸ªç”¨æˆ·å¯ä»¥åˆ›å»ºå’Œè‡ªå®šä¹‰è‡ªå·±çš„å…¬å¼€é¡µé¢ã€‚
